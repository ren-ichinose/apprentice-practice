# DataBase Practice  


## データベース関連の基本的な用語への理解を深める  

### データベースとは
データの集まり。

### DBMSとは
データベースを管理するシステム。

### RDBMSとは
二次元表の形式でデータを管理するシステム。

### 主要なRDBMSの製品
- Oracle Database
- PostgreSQL
- MySQL

### SQLとは
データベースを操作するための言語。

### テーブルとは
- 二次元表の形式でデータを管理するもの。
- 属性を表すカラムと、1件のデータであるレコードで構成されている。

### カラム
- テーブルの列に相当する。
- 属性（意味）をもっている。

### レコードとは
- テーブルの行に相当する。
- 1件のデータ。

### クエリ
- データベースへの命令のこと。


## データベース設計の流れを理解する

### 論理設計とは何か
- どのようなデータを、どのような形式で管理するのか、それぞれのエンティティの関連性も含めて決定する工程。

### 物理設計とは何か
- 論理設計で決定した内容をもとに、データの格納方法や、格納する物理的領域の決定、およびハードウェアの選定などをする工程。

### エンティティとは何か
- データベース内で表現したい対象。
- 意味を持ったデータの集まり。
- エンティティは属性や関連性を持っている。

### 正規化とは何か
- データの矛盾や無駄を無くし、データを扱いやすいように整理すること。

### ER図とは何か
- 各エンティティの関係性を視覚的に表現した図のこと。
- ER図には、エンティティとエンティティが持つ属性も表現されている。

### テーブル定義とは何か
- データベース内に作成するテーブルの構造を定義すること。
- テーブル名や列名、データ型、主キーや外部キーの設定などを定義する。

### インデックスとは何か
- 必要なデータを効率良く探すための仕組み。


## データベースの正規化を理解する

### 第一正規形
- ユーザー
  - id(PK)
  - 名前
- 購入履歴
  - id(PK)
  - 購入日
  - 商品id(PK)
  - 商品名
  - カテゴリ
  - 値段

### 第二正規形
- ユーザー
  - id(PK)
  - 名前
- 商品
  - id(PK)
  - 商品名
  - カテゴリ
  - 値段
- 購入履歴
  - id(PK)
  - 購入日
  - 商品_id(FK)

### 第三正規形
- ユーザー
  - id(PK)
  - 名前
- 商品
  - id(PK)
  - 商品名
  - 値段
- カテゴリ
  - id(PK)
  - カテゴリ名
- 商品カテゴリ
  - 商品_id(PK・FK)
  - カテゴリ_id(PK・FK)
- 購入履歴
  - id(PK)
  - 購入日
  - 商品_id(FK)

### ボイスコッド正規形
- 診療科
  - 患者(PK)
  - 担当医師(PK)
- 担当科
  - 担当医師(PK)
  - 診療科


## テーブルの定義を理解する

### データ型
- データベースに格納されるデータの種類を表している。
- 整数型、文字列型、日付型、真偽値型などがある。

### NULL
- 値が存在しないことを表す特別な値のこと。

### プライマリーキー
- カラムに設定できる属性の一つで、テーブル内の各レコードを一意に識別するために設定する。
- レコードを一意に識別する必要があるため、データが空の状態が存在してはいけない。

### 初期値
- 新しいレコードが挿入されたときに、カラムに自動的に設定される値のこと。
- NULL値が許容されない場合や、デフォルト値を設定する必要がある場合に使われることが多い。

### AUTO INCREMENT
- カラムに設定できる属性の一つで、データが追加された際に一意の値を自動的に付与する設定のこと。

### 外部キー制約
- カラムに設定できる属性の一つで、他のテーブルのカラムを参照し、設定したカラムに格納されるデータを、参照先のカラムに格納されているデータのみに限定できる制約のこと。

### ユニークキー制約
- カラムに設定できる属性の一つで、カラムに一意な値が入ることを強制する制約。
  

## テーブルの定義を理解する

### インデックスの作成
```sql
CREATE INDEX idx_birth_date ON employees (birth_date);
```

### インデックスの確認
```sql
show index from employees;
```

### インデックスを貼ることで高速化された理由
- テーブルをフルスキャンする必要がなくなった。
- 検索しやすい状態で管理されるようになった。

### インデックスのベストプラクティス
- 大規模なテーブルに対して作成する。
  - 目安：1万件超え
- カーディナリティが高く、値が平均的に分散している列に作成する。
  - 目安：全体のレコード数の5％程度以下
- SQL文でWHERE句の選択条件、または結合条件に使用されている列に作成する。
