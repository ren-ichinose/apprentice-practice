# backend_practice

## MVCへの理解

###  MVCとは

「Model」「View」「Controller」の3つの役割に分けてコードを管理する設計手法のこと。

- Model
  - システムのビジネスロジックを担当する部分。
  - DBとデータのやり取りをする。
  - データの登録・更新・削除などの処理をする。
  - ControllerとDBの橋渡しをする。
- View
  - 表示や入出力などのユーザーインターフェースを担当する部分。
- Controller
  - ModelとViewの制御を担当する部分。
  - ModelとViewの橋渡しをする。
  - Modelに処理を依頼する
  - Modelからの結果を受け取り、Viewに表示の依頼をする。

###  MVCが必要な理由

- 役割ごとにコードを分けることで分担作業ができるようになる。
- コードが分かれていることで、メンテナンス性が高くなる。


##  マイグレーションへの理解

### マイグレーションとは

- スキーマ定義を使用し、データベースを作成および更新するための一連の処理を行う仕組み。
- テーブルやカラムの作成・更新、および型や制約の追加などが可能。
- データベースに保存されているデータを保持したまま、データベースの構造を変更することができる。

### マイグレーションを使用するメリット

- SQLを直接書く必要がないため、SQLの知識がなくてもデータベースの操作ができる。
- データベース操作の一連の流れを自動化することができる。
- スキーマ定義に基づいたデータベースの作成や更新ができる。
- データベーススキーマの一貫性を維持し、開発環境と本番環境の差によるスキーマのズレを防ぎます。
- データベース設定の時間を削減することができる。

## Prismaへの理解

### Prismaとは

- Node.jsとTypeScriptのためのオープンソースのORM。
- PostgreSQL、MySQL、SQL Server、SQLite、MongoDBなどをサポートしている。
- TypeScriptを採用し、TypeScriptエコシステムの他のORMの保証を超えるレベルの型安全性を提供する。

### ORMのメリット

- ドメインモデル（ビジネスロジックとデータを組み込んだオブジェクトモデル）を実装しやすくなる。
- ビジネスロジックに焦点を当てることができ、データベースの構造やSQLの詳細について深く考える必要が減る。
- SQLをほとんど書く必要がないため、SQLに不慣れな開発者でもデータベースを簡単に利用できる。
- コードの量を削減し、再利用性を向上させる。具体的には以下のような効果がある。
  - CRUD操作のためのSQL文を繰り返し書く必要がない。
  - ユーザー入力のエスケープ処理により、SQLインジェクションなどの脆弱性を防ぐ。


### Active Record パターンとは

- モデルクラス（テーブルを表現するクラス）がデータベースの行（レコード）に直接対応しているデザインパターン。
- モデルクラスはデータベースの行を操作するためのメソッドを持ち、データベースとの対話（CRUD操作）を自身で行う。
- モデルクラスは、データベースの行のデータとその操作ロジックを共に持つため、構造がシンプルで直感的に理解しやすい。

### Data Mapper パターンとは

- データベースとアプリケーションのオブジェクト（エンティティ）が分離しているデザインパターン。
- エンティティクラスはデータベースの存在を意識せず、データベースとエンティティクラス間のデータの読み書きはマッパークラスが担当する。
- 複雑なビジネスロジックやデータベースの構造を扱う際に柔軟性を提供する。

### マッピングとは

- データベースのテーブルとオブジェクト指向プログラミング言語のオブジェクトの間の対応関係を定義すること。
- データベースのデータ構造とオブジェクトのデータ構造を互いに変換すること。


## APIとHTTPへの理解

### APIとは

- Application Programming Interface
- アプリケーションの機能やデータを外部へ公開するためのインターフェース。

### エンドポイントとは

- APIが提供する機能やデータにアクセスするためのURL。

### HTTPリクエストとHTTPレスポンスとは

- HTTPリクエスト
  - クライアント（通常はブラウザやアプリ）がサーバーにデータを要求するためのメッセージ。
- HTTPレスポンス
  - クライアントの要求に対してサーバーがクライアントに返すメッセージ。
- リクエストとレスポンスの間でデータがやり取りされることによって、ユーザーがウェブサイトを閲覧したり、APIを通じてアプリケーションがデータを取得したりすることが可能になる。

### HTTPメソッドとは

- HTTPリクエストの種類を表す。
- 主に以下の4つがある。
  - GET（データの取得）
  - POST（データの作成）
  - PUT（データの更新）
  - DELETE（データの削除）

### HTTPステータスコードとは

- HTTPリクエストの処理結果を表す。

### HTTPステータスコードの種類

- 1xx（情報）
  - リクエストを受け取り、処理を継続していることを示す。
- 2xx（成功）
  - リクエストを正常に処理したことを示す。
  - 200 OK
    - リクエストが成功したことを示す。
  - 201 Created
    - リクエストが成功し、新たにリソースが作成されたことを示す。
  - 204 No Content
    - リクエストが成功したが、レスポンスボディに返す情報がないことを示す。
- 3xx（リダイレクト）
  - リクエストを完了させるために、追加の処理が必要であることを示す。
  - 301 Moved Permanently
    - リクエストしたリソースが新しいURLに移動したことを示す。
  - 302 Found
    - リクエストしたリソースが一時的に新しいURLに移動したことを示す。
  - 304 Not Modified
    - リクエストしたリソースが更新されていないことを示す。
- 4xx（クライアントエラー）
  - リクエストに誤りがあることを示す。
  - 400 Bad Request
    - リクエストが不正であることを示す。
  - 401 Unauthorized
    - 認証が必要であることを示す。
  - 403 Forbidden
    - リクエストが拒否されたことを示す。
  - 404 Not Found
    - リクエストしたリソースが存在しないことを示す。
- 5xx（サーバーエラー）
  - サーバー側でエラーが発生したことを示す。
  - 500 Internal Server Error
    - サーバー内部でエラーが発生したことを示す。
  - 503 Service Unavailable
    - サーバーがメンテナンス中であることを示す。


### REST APIとは

- REST（Representational State Transfer）と呼ばれる設計原則に従って設計されたAPIのこと。

### RESTの設計原則

- クライアントとサーバーの間でデータをやり取りする際に、以下のような原則に従うこと。
  - 統一インターフェース
    - あらかじめ定義・共有された方法でやり取りする。
    - 例：「GET・POST・PUT・DELETE等のHTTPメソッドでやりとりする」
    - 例：「やり取りするデータはJSON形式にする」
  - アドレス可能性
    - 全ての情報が一意なURI（識別子）を持っている。
    - 提供する情報をURIで表現できる。
  - 接続性
    - やりとりされる情報にはハイパーリンクを含めることができる。
  - ステートレス性
    - やりとりが１回ごとに完結する。
    - 

### REST APIのメリット

- 設計原則に従っているため、APIの設計がシンプルになる。


## 認証と認可への理解

### 認証とは

- システムがユーザーの身元を確認するプロセスのこと。

### 認可とは

- システムがユーザーに対して権限を与えるプロセスのこと。

### JWTとは

- JSON Web Token
- 認証情報をJSON形式で表現したトークン。
- ヘッダー、ペイロード、署名の3つの部分から構成される。
  - ヘッダー
    - トークンの種類や暗号化のアルゴリズムなどの情報を含む。
  - ペイロード
    - システム側でJWTに含める情報。
    - 例：ユーザーID、有効期限など
  - 署名
    - ヘッダーとペイロードを結合したものに秘密鍵を用いて暗号化したもの。
    - 署名が正しいことを検証することで、JWTが改ざんされていないことを確認できる。

### JWT認証の流れ

1. 入力されたユーザー情報をクライアントがサーバーに送信する。
2. サーバーはユーザー情報を検証し、正当な場合のみJWTを作成する。
3. サーバーは作成したJWTをクライアントに返す。
4. クライアントは返されたJWTを保存する。
5. リクエスト（例：データの取得や更新）のたびに、クライアントはJWTをサーバーに送信する。
6. サーバーはJWTを検証し、有効な場合はリクエストを処理する。

### JWTのメリット・デメリット

- メリット
  - サーバー側でユーザーの認証情報を保持する必要がない。
  - ユーザーの認証情報をトークンに含めることができる。
  - トークンに有効期限を設定することができる。
  - 改ざんがあってもチェックできるため安全性が高い。
  - URLに含めることができるため、HTTPリクエストでのやり取りが容易。

- デメリット
  - トークンが盗まれると有効期限が切れるまで認証が継続される。
  - トークンの有効期限が切れると再度ログインし、トークンを再発行する必要がある。